<?xml version="1.0" encoding="UTF-8"?>
<testsuites>
  <testsuite name="" tests="48" assertions="62" errors="2" warnings="0" failures="27" skipped="0" time="16.891188">
    <testsuite name="Unit" tests="9" assertions="17" errors="1" warnings="0" failures="0" skipped="0" time="0.426411">
      <testsuite name="Tests\Unit\ExampleTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ExampleTest.php" tests="1" assertions="1" errors="0" warnings="0" failures="0" skipped="0" time="0.388595">
        <testcase name="test_example" class="Tests\Unit\ExampleTest" classname="Tests.Unit.ExampleTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ExampleTest.php" line="14" assertions="1" time="0.388595"/>
      </testsuite>
      <testsuite name="Tests\Unit\ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" tests="8" assertions="16" errors="1" warnings="0" failures="0" skipped="0" time="0.037817">
        <testcase name="testLocationValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="17" assertions="0" time="0.015393">
          <error type="PHPUnit\Framework\Error\Notice">Tests\Unit\ParentsMatchedDonarsTest::testLocationValue
Trying to get property 'state_id' of non-object

/Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Traits/ParentsToBeMatchedDonerTrait.php:106
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php:19</error>
        </testcase>
        <testcase name="testAgeValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="29" assertions="4" time="0.006565"/>
        <testcase name="testRaceValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="43" assertions="2" time="0.005609"/>
        <testcase name="testEthnicityValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="55" assertions="2" time="0.002912"/>
        <testcase name="testHeightValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="67" assertions="2" time="0.001142"/>
        <testcase name="testHairColourValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="79" assertions="2" time="0.001442"/>
        <testcase name="testEyeColourValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="91" assertions="2" time="0.003428"/>
        <testcase name="testEducationValue" class="Tests\Unit\ParentsMatchedDonarsTest" classname="Tests.Unit.ParentsMatchedDonarsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Unit/ParentsMatchedDonarsTest.php" line="103" assertions="2" time="0.001326"/>
      </testsuite>
    </testsuite>
    <testsuite name="Feature" tests="39" assertions="45" errors="1" warnings="0" failures="27" skipped="0" time="16.464777">
      <testsuite name="Tests\Feature\DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" tests="5" assertions="5" errors="0" warnings="0" failures="5" skipped="0" time="3.071496">
        <testcase name="testUserAuthentication" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="19" assertions="1" time="2.328544">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(21): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:22</failure>
        </testcase>
        <testcase name="testEnsureDonorAuthentication" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="33" assertions="1" time="0.169535">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testEnsureDonorAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(39): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testEnsureDonorAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:40</failure>
        </testcase>
        <testcase name="testPtbProfileCards" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="51" assertions="1" time="0.187760">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testPtbProfileCards
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(53): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testPtbProfileCards()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:54</failure>
        </testcase>
        <testcase name="testPtbProfileCardsSearch" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="66" assertions="1" time="0.193518">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testPtbProfileCardsSearch
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(68): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testPtbProfileCardsSearch()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:69</failure>
        </testcase>
        <testcase name="testPtbProfileCardsMinCharSearch" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="81" assertions="1" time="0.192139">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testPtbProfileCardsMinCharSearch
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(83): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testPtbProfileCardsMinCharSearch()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:84</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\ExampleTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ExampleTest.php" tests="1" assertions="1" errors="0" warnings="0" failures="0" skipped="0" time="0.227793">
        <testcase name="test_example" class="Tests\Feature\ExampleTest" classname="Tests.Feature.ExampleTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ExampleTest.php" line="15" assertions="1" time="0.227793"/>
      </testsuite>
      <testsuite name="Tests\Feature\GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" tests="4" assertions="5" errors="0" warnings="0" failures="3" skipped="0" time="0.939394">
        <testcase name="testGetStates" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="18" assertions="2" time="0.243989"/>
        <testcase name="testGetProfileSetterData" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="32" assertions="1" time="0.273413">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\GetSetterDataTest::testGetProfileSetterData
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php(38): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/profile...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\GetSetterDataTest-&gt;testGetProfileSetterData()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\GetSetterDataTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php:39</failure>
        </testcase>
        <testcase name="testGetPreferencesSetterData" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="50" assertions="1" time="0.223081">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\GetSetterDataTest::testGetPreferencesSetterData
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/prefere...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php(56): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/prefere...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\GetSetterDataTest-&gt;testGetPreferencesSetterData()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\GetSetterDataTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php:57</failure>
        </testcase>
        <testcase name="testGetAttributeSetterData" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="68" assertions="1" time="0.198910">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\GetSetterDataTest::testGetAttributeSetterData
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/attribu...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php(70): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/attribu...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\GetSetterDataTest-&gt;testGetAttributeSetterData()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\GetSetterDataTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php:71</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" tests="3" assertions="7" errors="0" warnings="0" failures="0" skipped="0" time="1.050885">
        <testcase name="testGetRoles" class="Tests\Feature\InquiryFormTest" classname="Tests.Feature.InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" line="19" assertions="2" time="0.178206"/>
        <testcase name="testRequiredFieldsForInquiry" class="Tests\Feature\InquiryFormTest" classname="Tests.Feature.InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" line="33" assertions="2" time="0.217945"/>
        <testcase name="testSuccessfulSetAttributes" class="Tests\Feature\InquiryFormTest" classname="Tests.Feature.InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" line="56" assertions="3" time="0.654735"/>
      </testsuite>
      <testsuite name="Tests\Feature\LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" tests="4" assertions="6" errors="0" warnings="0" failures="0" skipped="0" time="1.210703">
        <testcase name="testRequiredFieldsForLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="18" assertions="1" time="0.190366"/>
        <testcase name="testDeletedUserLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="34" assertions="1" time="0.371631"/>
        <testcase name="testDeletedByAdminUserLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="50" assertions="1" time="0.447253"/>
        <testcase name="testSuccessfulLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="66" assertions="3" time="0.201452"/>
      </testsuite>
      <testsuite name="Tests\Feature\LogoutUserTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php" tests="2" assertions="2" errors="0" warnings="0" failures="2" skipped="0" time="0.585696">
        <testcase name="testLogoutUserAuthentication" class="Tests\Feature\LogoutUserTest" classname="Tests.Feature.LogoutUserTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php" line="19" assertions="1" time="0.279815">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\LogoutUserTest::testLogoutUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/logout?...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php(21): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/logout?...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\LogoutUserTest-&gt;testLogoutUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\LogoutUserTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php:22</failure>
        </testcase>
        <testcase name="testLogoutUser" class="Tests\Feature\LogoutUserTest" classname="Tests.Feature.LogoutUserTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php" line="33" assertions="1" time="0.305882">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\LogoutUserTest::testLogoutUser
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/logout?...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php(35): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/logout?...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\LogoutUserTest-&gt;testLogoutUser()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\LogoutUserTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php:36</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" tests="4" assertions="3" errors="1" warnings="0" failures="3" skipped="0" time="1.213593">
        <testcase name="testUserAuthentication" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="18" assertions="1" time="0.496479">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\ProfileRegisterTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php(29): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/profile...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\ProfileRegisterTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\ProfileRegisterTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:30</failure>
        </testcase>
        <testcase name="testRequiredFieldsForProfileRegistration" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="41" assertions="1" time="0.308601">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\ProfileRegisterTest::testRequiredFieldsForProfileRegistration
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php(52): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/profile...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\ProfileRegisterTest-&gt;testRequiredFieldsForProfileRegistration()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\ProfileRegisterTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:53</failure>
        </testcase>
        <testcase name="testSuccessfulDonorProfileRegistration" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="65" assertions="1" time="0.219885">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\ProfileRegisterTest::testSuccessfulDonorProfileRegistration
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php(76): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/profile...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\ProfileRegisterTest-&gt;testSuccessfulDonorProfileRegistration()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\ProfileRegisterTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:77</failure>
        </testcase>
        <testcase name="testSuccessfulPtbProfileRegistration" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="89" assertions="0" time="0.188627">
          <error type="Error">Tests\Feature\ProfileRegisterTest::testSuccessfulPtbProfileRegistration
Error: Class 'Tests\Feature\AuthHelper' not found

/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:93</error>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" tests="4" assertions="4" errors="0" warnings="0" failures="2" skipped="0" time="4.334258">
        <testcase name="testRequiredFieldsForRegistration" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="19" assertions="1" time="0.414783"/>
        <testcase name="testAlreadyExitsPhoneEmailForRegistration" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="42" assertions="1" time="0.460939"/>
        <testcase name="testSuccessfulRegistrationPtb" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="65" assertions="1" time="1.937060">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\RegistrationTest::testSuccessfulRegistrationPtb
Expected response status code [200] but received 500.

The following exception occurred during the request:

ArgumentCountError: Too few arguments to function App\Jobs\SendRegisterSuccessfulJob::__construct(), 1 passed in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Services/UserRegisterService.php on line 44 and exactly 2 expected in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Jobs/SendRegisterSuccessfulJob.php:23
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Services/UserRegisterService.php(44): App\Jobs\SendRegisterSuccessfulJob-&gt;__construct(Object(App\Models\User))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Support/Facades/Facade.php(261): App\Services\UserRegisterService-&gt;register(Array)
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Controllers/Api/UserController.php(139): Illuminate\Support\Facades\Facade::__callStatic('register', Array)
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Controller.php(54): App\Http\Controllers\Api\UserController-&gt;register(Object(App\Http\Requests\RegisterRequest))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(45): Illuminate\Routing\Controller-&gt;callAction('register', Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(262): Illuminate\Routing\ControllerDispatcher-&gt;dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\UserController), 'register')
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(205): Illuminate\Routing\Route-&gt;runController()
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(721): Illuminate\Routing\Route-&gt;run()
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Routing\Router-&gt;Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/registe...', Array, Array, Array, Array)
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php(79): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/registe...', Array)
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\RegistrationTest-&gt;testSuccessfulRegistrationPtb()
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#45 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\RegistrationTest))
#46 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#47 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#48 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#49 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#50 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#51 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#52 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#53 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php:80</failure>
        </testcase>
        <testcase name="testSuccessfulRegistrationDonor" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="92" assertions="1" time="1.521475">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\RegistrationTest::testSuccessfulRegistrationDonor
Expected response status code [200] but received 500.

The following exception occurred during the request:

ArgumentCountError: Too few arguments to function App\Jobs\SendRegisterSuccessfulJob::__construct(), 1 passed in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Services/UserRegisterService.php on line 44 and exactly 2 expected in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Jobs/SendRegisterSuccessfulJob.php:23
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Services/UserRegisterService.php(44): App\Jobs\SendRegisterSuccessfulJob-&gt;__construct(Object(App\Models\User))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Support/Facades/Facade.php(261): App\Services\UserRegisterService-&gt;register(Array)
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Controllers/Api/UserController.php(139): Illuminate\Support\Facades\Facade::__callStatic('register', Array)
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Controller.php(54): App\Http\Controllers\Api\UserController-&gt;register(Object(App\Http\Requests\RegisterRequest))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(45): Illuminate\Routing\Controller-&gt;callAction('register', Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(262): Illuminate\Routing\ControllerDispatcher-&gt;dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\UserController), 'register')
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(205): Illuminate\Routing\Route-&gt;runController()
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(721): Illuminate\Routing\Route-&gt;run()
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Routing\Router-&gt;Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/registe...', Array, Array, Array, Array)
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php(106): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/registe...', Array)
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\RegistrationTest-&gt;testSuccessfulRegistrationDonor()
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#45 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\RegistrationTest))
#46 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#47 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#48 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#49 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#50 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#51 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#52 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#53 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php:107</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" tests="4" assertions="4" errors="0" warnings="0" failures="4" skipped="0" time="1.128982">
        <testcase name="testUserAuthentication" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="19" assertions="1" time="0.282921">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(31): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:32</failure>
        </testcase>
        <testcase name="testEnsureDonorAuthentication" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="43" assertions="1" time="0.227932">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testEnsureDonorAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(59): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testEnsureDonorAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:60</failure>
        </testcase>
        <testcase name="testRequiredFieldsForSetAttributes" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="71" assertions="1" time="0.303285">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testRequiredFieldsForSetAttributes
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(83): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testRequiredFieldsForSetAttributes()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:84</failure>
        </testcase>
        <testcase name="testSuccessfulSetAttributes" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="96" assertions="1" time="0.314844">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testSuccessfulSetAttributes
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(108): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testSuccessfulSetAttributes()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:109</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" tests="4" assertions="4" errors="0" warnings="0" failures="4" skipped="0" time="1.549670">
        <testcase name="testUserAuthentication" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="18" assertions="1" time="0.415085">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(25): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-gal...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:26</failure>
        </testcase>
        <testcase name="testRequiredFieldsForSetGallery" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="34" assertions="1" time="0.532457">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testRequiredFieldsForSetGallery
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(41): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-gal...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testRequiredFieldsForSetGallery()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:42</failure>
        </testcase>
        <testcase name="testSuccessfulSetGallery" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="50" assertions="1" time="0.346701">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testSuccessfulSetGallery
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(57): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-gal...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testSuccessfulSetGallery()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:58</failure>
        </testcase>
        <testcase name="testGetStates" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="69" assertions="1" time="0.255426">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testGetStates
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/get-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(71): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/get-gal...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testGetStates()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:72</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" tests="4" assertions="4" errors="0" warnings="0" failures="4" skipped="0" time="1.152307">
        <testcase name="testUserAuthentication" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="19" assertions="1" time="0.228854">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(36): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:37</failure>
        </testcase>
        <testcase name="testEnsurePtbAuthentication" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="48" assertions="1" time="0.342372">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testEnsurePtbAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(65): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testEnsurePtbAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:66</failure>
        </testcase>
        <testcase name="testRequiredFieldsForSetPreferences" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="77" assertions="1" time="0.368294">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testRequiredFieldsForSetPreferences
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(94): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testRequiredFieldsForSetPreferences()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:95</failure>
        </testcase>
        <testcase name="testSuccessfulSetPreferences" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="107" assertions="1" time="0.212787">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testSuccessfulSetPreferences
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(124): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testSuccessfulSetPreferences()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:125</failure>
        </testcase>
      </testsuite>
    </testsuite>
  </testsuite>
</testsuites>
