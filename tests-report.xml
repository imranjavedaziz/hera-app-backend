<?xml version="1.0" encoding="UTF-8"?>
<testsuites>
  <testsuite name="" tests="47" assertions="56" errors="0" warnings="0" failures="35" skipped="0" time="25.352024">
    <testsuite name="Feature" tests="47" assertions="56" errors="0" warnings="0" failures="35" skipped="0" time="25.352024">
      <testsuite name="Tests\Feature\DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" tests="7" assertions="7" errors="0" warnings="0" failures="7" skipped="0" time="3.067300">
        <testcase name="testUserAuthentication" class="Tests\Feature\DashboardProfileDetailsTest" classname="Tests.Feature.DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" line="19" assertions="1" time="1.333192">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DashboardProfileDetailsTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/doner-p...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php(21): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/doner-p...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DashboardProfileDetailsTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DashboardProfileDetailsTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php:22</failure>
        </testcase>
        <testcase name="testEnsurePtbAuthentication" class="Tests\Feature\DashboardProfileDetailsTest" classname="Tests.Feature.DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" line="33" assertions="1" time="0.231410">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DashboardProfileDetailsTest::testEnsurePtbAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/doner-p...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php(35): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/doner-p...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DashboardProfileDetailsTest-&gt;testEnsurePtbAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DashboardProfileDetailsTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php:36</failure>
        </testcase>
        <testcase name="testEnsureDonorAuthentication" class="Tests\Feature\DashboardProfileDetailsTest" classname="Tests.Feature.DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" line="47" assertions="1" time="0.235557">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DashboardProfileDetailsTest::testEnsureDonorAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php(53): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DashboardProfileDetailsTest-&gt;testEnsureDonorAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DashboardProfileDetailsTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php:54</failure>
        </testcase>
        <testcase name="testRequiredParamDonerProfileDetails" class="Tests\Feature\DashboardProfileDetailsTest" classname="Tests.Feature.DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" line="65" assertions="1" time="0.356256">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DashboardProfileDetailsTest::testRequiredParamDonerProfileDetails
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/doner-p...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php(73): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/doner-p...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DashboardProfileDetailsTest-&gt;testRequiredParamDonerProfileDetails()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DashboardProfileDetailsTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php:74</failure>
        </testcase>
        <testcase name="testSubscriptionStatusPtbDonerProfileDetails" class="Tests\Feature\DashboardProfileDetailsTest" classname="Tests.Feature.DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" line="86" assertions="1" time="0.285351">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DashboardProfileDetailsTest::testSubscriptionStatusPtbDonerProfileDetails
Expected response status code [422] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/doner-p...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php(94): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/doner-p...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DashboardProfileDetailsTest-&gt;testSubscriptionStatusPtbDonerProfileDetails()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DashboardProfileDetailsTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 422 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php:95</failure>
        </testcase>
        <testcase name="testDonerProfileDetails" class="Tests\Feature\DashboardProfileDetailsTest" classname="Tests.Feature.DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" line="107" assertions="1" time="0.326880">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DashboardProfileDetailsTest::testDonerProfileDetails
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/doner-p...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php(115): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/doner-p...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DashboardProfileDetailsTest-&gt;testDonerProfileDetails()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DashboardProfileDetailsTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php:116</failure>
        </testcase>
        <testcase name="testPtbProfileDetails" class="Tests\Feature\DashboardProfileDetailsTest" classname="Tests.Feature.DashboardProfileDetailsTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php" line="128" assertions="1" time="0.298654">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DashboardProfileDetailsTest::testPtbProfileDetails
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php(136): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DashboardProfileDetailsTest-&gt;testPtbProfileDetails()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DashboardProfileDetailsTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DashboardProfileDetailsTest.php:137</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" tests="5" assertions="5" errors="0" warnings="0" failures="5" skipped="0" time="1.552322">
        <testcase name="testUserAuthentication" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="19" assertions="1" time="0.269523">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(21): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:22</failure>
        </testcase>
        <testcase name="testEnsureDonorAuthentication" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="33" assertions="1" time="0.310455">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testEnsureDonorAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(39): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testEnsureDonorAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:40</failure>
        </testcase>
        <testcase name="testPtbProfileCards" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="51" assertions="1" time="0.350902">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testPtbProfileCards
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(53): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testPtbProfileCards()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:54</failure>
        </testcase>
        <testcase name="testPtbProfileCardsSearch" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="66" assertions="1" time="0.337151">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testPtbProfileCardsSearch
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(68): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testPtbProfileCardsSearch()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:69</failure>
        </testcase>
        <testcase name="testPtbProfileCardsMaxStateSelectForSerach" class="Tests\Feature\DonorDashBoardTest" classname="Tests.Feature.DonorDashBoardTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php" line="81" assertions="1" time="0.284291">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\DonorDashBoardTest::testPtbProfileCardsMaxStateSelectForSerach
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/ptb-pro...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php(83): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/ptb-pro...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\DonorDashBoardTest-&gt;testPtbProfileCardsMaxStateSelectForSerach()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\DonorDashBoardTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/DonorDashBoardTest.php:84</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\ExampleTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ExampleTest.php" tests="1" assertions="1" errors="0" warnings="0" failures="0" skipped="0" time="0.268673">
        <testcase name="test_example" class="Tests\Feature\ExampleTest" classname="Tests.Feature.ExampleTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ExampleTest.php" line="15" assertions="1" time="0.268673"/>
      </testsuite>
      <testsuite name="Tests\Feature\GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" tests="4" assertions="5" errors="0" warnings="0" failures="3" skipped="0" time="1.036510">
        <testcase name="testGetStates" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="18" assertions="2" time="0.260940"/>
        <testcase name="testGetProfileSetterData" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="32" assertions="1" time="0.233992">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\GetSetterDataTest::testGetProfileSetterData
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php(38): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/profile...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\GetSetterDataTest-&gt;testGetProfileSetterData()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\GetSetterDataTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php:39</failure>
        </testcase>
        <testcase name="testGetPreferencesSetterData" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="50" assertions="1" time="0.244479">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\GetSetterDataTest::testGetPreferencesSetterData
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/prefere...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php(56): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/prefere...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\GetSetterDataTest-&gt;testGetPreferencesSetterData()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\GetSetterDataTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php:57</failure>
        </testcase>
        <testcase name="testGetAttributeSetterData" class="Tests\Feature\GetSetterDataTest" classname="Tests.Feature.GetSetterDataTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php" line="68" assertions="1" time="0.297099">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\GetSetterDataTest::testGetAttributeSetterData
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/attribu...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php(70): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/attribu...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\GetSetterDataTest-&gt;testGetAttributeSetterData()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\GetSetterDataTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/GetSetterDataTest.php:71</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" tests="3" assertions="7" errors="0" warnings="0" failures="0" skipped="0" time="1.070310">
        <testcase name="testGetRoles" class="Tests\Feature\InquiryFormTest" classname="Tests.Feature.InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" line="19" assertions="2" time="0.318883"/>
        <testcase name="testRequiredFieldsForInquiry" class="Tests\Feature\InquiryFormTest" classname="Tests.Feature.InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" line="33" assertions="2" time="0.328244"/>
        <testcase name="testSuccessfulSupportForm" class="Tests\Feature\InquiryFormTest" classname="Tests.Feature.InquiryFormTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/InquiryFormTest.php" line="56" assertions="3" time="0.423183"/>
      </testsuite>
      <testsuite name="Tests\Feature\LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" tests="4" assertions="6" errors="0" warnings="0" failures="0" skipped="0" time="2.071912">
        <testcase name="testRequiredFieldsForLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="18" assertions="1" time="0.264895"/>
        <testcase name="testDeletedUserLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="34" assertions="1" time="0.597555"/>
        <testcase name="testDeletedByAdminUserLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="50" assertions="1" time="0.722149"/>
        <testcase name="testSuccessfulLogin" class="Tests\Feature\LoginTest" classname="Tests.Feature.LoginTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LoginTest.php" line="66" assertions="3" time="0.487313"/>
      </testsuite>
      <testsuite name="Tests\Feature\LogoutUserTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php" tests="2" assertions="2" errors="0" warnings="0" failures="2" skipped="0" time="0.732568">
        <testcase name="testLogoutUserAuthentication" class="Tests\Feature\LogoutUserTest" classname="Tests.Feature.LogoutUserTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php" line="19" assertions="1" time="0.296238">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\LogoutUserTest::testLogoutUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/logout?...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php(21): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/logout?...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\LogoutUserTest-&gt;testLogoutUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\LogoutUserTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php:22</failure>
        </testcase>
        <testcase name="testLogoutUser" class="Tests\Feature\LogoutUserTest" classname="Tests.Feature.LogoutUserTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php" line="33" assertions="1" time="0.436330">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\LogoutUserTest::testLogoutUser
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/logout?...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php(35): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/logout?...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\LogoutUserTest-&gt;testLogoutUser()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\LogoutUserTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/LogoutUserTest.php:36</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" tests="4" assertions="4" errors="0" warnings="0" failures="4" skipped="0" time="2.239489">
        <testcase name="testUserAuthentication" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="19" assertions="1" time="0.508190">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\ProfileRegisterTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php(30): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/profile...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\ProfileRegisterTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\ProfileRegisterTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:31</failure>
        </testcase>
        <testcase name="testRequiredFieldsForProfileRegistration" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="42" assertions="1" time="0.658075">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\ProfileRegisterTest::testRequiredFieldsForProfileRegistration
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php(53): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/profile...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\ProfileRegisterTest-&gt;testRequiredFieldsForProfileRegistration()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\ProfileRegisterTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:54</failure>
        </testcase>
        <testcase name="testSuccessfulDonorProfileRegistration" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="66" assertions="1" time="0.540082">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\ProfileRegisterTest::testSuccessfulDonorProfileRegistration
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php(77): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/profile...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\ProfileRegisterTest-&gt;testSuccessfulDonorProfileRegistration()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\ProfileRegisterTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:78</failure>
        </testcase>
        <testcase name="testSuccessfulPtbProfileRegistration" class="Tests\Feature\ProfileRegisterTest" classname="Tests.Feature.ProfileRegisterTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php" line="90" assertions="1" time="0.533142">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\ProfileRegisterTest::testSuccessfulPtbProfileRegistration
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/profile...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php(105): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/profile...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\ProfileRegisterTest-&gt;testSuccessfulPtbProfileRegistration()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\ProfileRegisterTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/ProfileRegisterTest.php:106</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" tests="4" assertions="6" errors="0" warnings="0" failures="1" skipped="0" time="8.225951">
        <testcase name="testRequiredFieldsForRegistration" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="19" assertions="1" time="0.568546"/>
        <testcase name="testAlreadyExitsPhoneEmailForRegistration" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="42" assertions="1" time="0.735837"/>
        <testcase name="testSuccessfulRegistrationPtb" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="65" assertions="3" time="2.091999"/>
        <testcase name="testSuccessfulRegistrationDonor" class="Tests\Feature\RegistrationTest" classname="Tests.Feature.RegistrationTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php" line="92" assertions="1" time="4.829568">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\RegistrationTest::testSuccessfulRegistrationDonor
Expected response status code [200] but received 404.
Failed asserting that 200 is identical to 404.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/RegistrationTest.php:107</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" tests="4" assertions="4" errors="0" warnings="0" failures="4" skipped="0" time="1.148416">
        <testcase name="testUserAuthentication" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="19" assertions="1" time="0.329643">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(31): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:32</failure>
        </testcase>
        <testcase name="testEnsureDonorAuthentication" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="43" assertions="1" time="0.311724">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testEnsureDonorAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(59): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testEnsureDonorAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:60</failure>
        </testcase>
        <testcase name="testRequiredFieldsForSetAttributes" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="71" assertions="1" time="0.237231">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testRequiredFieldsForSetAttributes
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(83): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testRequiredFieldsForSetAttributes()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:84</failure>
        </testcase>
        <testcase name="testSuccessfulSetAttributes" class="Tests\Feature\SetAttributeTest" classname="Tests.Feature.SetAttributeTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php" line="96" assertions="1" time="0.269819">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetAttributeTest::testSuccessfulSetAttributes
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-att...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php(108): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-att...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetAttributeTest-&gt;testSuccessfulSetAttributes()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetAttributeTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetAttributeTest.php:109</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" tests="5" assertions="5" errors="0" warnings="0" failures="5" skipped="0" time="2.485930">
        <testcase name="testUserAuthentication" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="23" assertions="1" time="0.312629">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(30): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-gal...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:31</failure>
        </testcase>
        <testcase name="testRequiredFieldsForSetGallery" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="39" assertions="1" time="0.787797">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testRequiredFieldsForSetGallery
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(46): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-gal...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testRequiredFieldsForSetGallery()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:47</failure>
        </testcase>
        <testcase name="testSuccessfulSetGallery" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="55" assertions="1" time="0.429338">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testSuccessfulSetGallery
Expected response status code [404] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(62): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-gal...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testSuccessfulSetGallery()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 404 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:63</failure>
        </testcase>
        <testcase name="testSetGalleryLimit" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="74" assertions="1" time="0.703200">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testSetGalleryLimit
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(476): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-gal...', Array, Array, Array, Array, '{"video":"","ol...')
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(335): Illuminate\Foundation\Testing\TestCase-&gt;json('POST', '/api/v1/set-gal...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(87): Illuminate\Foundation\Testing\TestCase-&gt;postJson('/api/v1/set-gal...', Array, Array)
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testSetGalleryLimit()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#45 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#46 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:88</failure>
        </testcase>
        <testcase name="testGetStates" class="Tests\Feature\SetGalleryTest" classname="Tests.Feature.SetGalleryTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php" line="99" assertions="1" time="0.252966">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetGalleryTest::testGetStates
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(294): Illuminate\Foundation\Testing\TestCase-&gt;call('GET', '/api/v1/get-gal...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php(101): Illuminate\Foundation\Testing\TestCase-&gt;get('/api/v1/get-gal...', Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetGalleryTest-&gt;testGetStates()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetGalleryTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetGalleryTest.php:102</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" tests="4" assertions="4" errors="0" warnings="0" failures="4" skipped="0" time="1.452642">
        <testcase name="testUserAuthentication" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="19" assertions="1" time="0.406455">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testUserAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(36): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testUserAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:37</failure>
        </testcase>
        <testcase name="testEnsurePtbAuthentication" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="48" assertions="1" time="0.317024">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testEnsurePtbAuthentication
Expected response status code [403] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(65): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testEnsurePtbAuthentication()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 403 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:66</failure>
        </testcase>
        <testcase name="testRequiredFieldsForSetPreferences" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="77" assertions="1" time="0.396109">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testRequiredFieldsForSetPreferences
Expected response status code [417] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(94): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testRequiredFieldsForSetPreferences()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 417 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:95</failure>
        </testcase>
        <testcase name="testSuccessfulSetPreferences" class="Tests\Feature\SetPreferencesTest" classname="Tests.Feature.SetPreferencesTest" file="/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php" line="107" assertions="1" time="0.333054">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\SetPreferencesTest::testSuccessfulSetPreferences
Expected response status code [200] but received 500.

The following exception occurred during the request:

Error: Call to undefined function App\Http\Middleware\apache_request_headers() in /Applications/MAMP/htdocs/kiwitech/mbcbackend/app/Http/Middleware/JwtMiddleware.php:25
Stack trace:
#0 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): App\Http\Middleware\JwtMiddleware-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#1 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#2 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\SubstituteBindings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#3 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(127): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#4 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(103): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequest(Object(Illuminate\Http\Request), Object(Closure), Array)
#5 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(55): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handleRequestUsingNamedLimiter(Object(Illuminate\Http\Request), Object(Closure), 'api', Object(Closure))
#6 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Routing\Middleware\ThrottleRequests-&gt;handle(Object(Illuminate\Http\Request), Object(Closure), 'api')
#7 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#8 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(723): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#9 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(698): Illuminate\Routing\Router-&gt;runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#10 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(662): Illuminate\Routing\Router-&gt;runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#11 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(651): Illuminate\Routing\Router-&gt;dispatchToRoute(Object(Illuminate\Http\Request))
#12 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(167): Illuminate\Routing\Router-&gt;dispatch(Object(Illuminate\Http\Request))
#13 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(128): Illuminate\Foundation\Http\Kernel-&gt;Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#14 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#15 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#16 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#17 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\TrimStrings-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#21 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\ValidatePostSize-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#24 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/fruitcake/laravel-cors/src/HandleCors.php(52): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Fruitcake\Cors\HandleCors-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#26 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(39): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(167): Illuminate\Http\Middleware\TrustProxies-&gt;handle(Object(Illuminate\Http\Request), Object(Closure))
#28 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(103): Illuminate\Pipeline\Pipeline-&gt;Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(142): Illuminate\Pipeline\Pipeline-&gt;then(Object(Closure))
#30 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(111): Illuminate\Foundation\Http\Kernel-&gt;sendRequestThroughRouter(Object(Illuminate\Http\Request))
#31 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(510): Illuminate\Foundation\Http\Kernel-&gt;handle(Object(Illuminate\Http\Request))
#32 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(322): Illuminate\Foundation\Testing\TestCase-&gt;call('POST', '/api/v1/set-pre...', Array, Array, Array, Array)
#33 /Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php(124): Illuminate\Foundation\Testing\TestCase-&gt;post('/api/v1/set-pre...', Array, Array)
#34 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1548): Tests\Feature\SetPreferencesTest-&gt;testSuccessfulSetPreferences()
#35 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1154): PHPUnit\Framework\TestCase-&gt;runTest()
#36 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestResult.php(728): PHPUnit\Framework\TestCase-&gt;runBare()
#37 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestCase.php(904): PHPUnit\Framework\TestResult-&gt;run(Object(Tests\Feature\SetPreferencesTest))
#38 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestCase-&gt;run(Object(PHPUnit\Framework\TestResult))
#39 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#40 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(673): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#41 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(661): PHPUnit\Framework\TestSuite-&gt;run(Object(PHPUnit\Framework\TestResult))
#42 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(144): PHPUnit\TextUI\TestRunner-&gt;run(Object(PHPUnit\Framework\TestSuite), Array, Array, true)
#43 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/src/TextUI/Command.php(97): PHPUnit\TextUI\Command-&gt;run(Array, true)
#44 /Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/phpunit/phpunit/phpunit(98): PHPUnit\TextUI\Command::main()
#45 {main}
Failed asserting that 200 is identical to 500.

/Applications/MAMP/htdocs/kiwitech/mbcbackend/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:177
/Applications/MAMP/htdocs/kiwitech/mbcbackend/tests/Feature/SetPrefrencesTest.php:125</failure>
        </testcase>
      </testsuite>
    </testsuite>
  </testsuite>
</testsuites>
